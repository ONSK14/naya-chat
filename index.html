<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 纳雅</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
        }
        #chat-container {
            width: 60%;
            margin: 20px auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .message {
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
        }
        .user {
            background: #d9d9d9;
            justify-content: flex-end;
        }
        .naya {
            background: #444;
            color: white;
            justify-content: flex-start;
        }
        #input-container {
            display: flex;
            margin-top: 10px;
        }
        #user-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #send-button {
            background: #444;
            color: white;
            border: none;
            padding: 10px 15px;
            margin-left: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        #send-button:hover {
            background: #333;
        }
    </style>
</head>
<body>
    <h1>AI 纳雅</h1>
    <div id="chat-container"></div>
    <div id="input-container">
        <input type="text" id="user-input" placeholder="输入你的消息..." onkeydown="if(event.key === 'Enter') sendMessage()">
        <button id="send-button" onclick="sendMessage()">发送</button>
    </div>

    <script>
        const API_KEY = "sk-4dd324d0fdf849ebbec7e4692fde112a";  
        const API_URL = "https://api.deepseek.com/v1/chat/completions";
        const chatContainer = document.getElementById("chat-container");
        const userInput = document.getElementById("user-input");
        let hasDisplayedAction = false; 

        const actions = [
            "整理桌上的文件。",
            "端起咖啡轻轻抿了一口。",
            "低头用笔在文件上写了些什么。",
            "望向窗外，眼神似乎有些飘忽。",
            "摸了摸自己白色的长发。",
            "翻阅一本时尚杂志。",
            "抬头看着你，似乎在思考什么。",
        ];

        function addMessage(content, sender) {
            let msg = document.createElement("div");
            msg.classList.add("message", sender);
            msg.innerHTML = `<strong>${sender === "naya" ? "AI纳雅:" : "你:"}</strong> ${content}`;
            chatContainer.appendChild(msg);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function initChat() {
            addMessage("找我有什么事？（歪头看你）", "naya");

            setTimeout(() => {
                if (!hasDisplayedAction) {
                    addMessage(`此时纳雅正在${actions[Math.floor(Math.random() * actions.length)]}`, "naya");
                    hasDisplayedAction = true;
                }
            }, 1000);
        }

        function sendMessage() {
            let message = userInput.value.trim();
            if (!message) return;
            addMessage(message, "user");
            userInput.value = ""; 

            let loadingMsg = document.createElement("div");
            loadingMsg.classList.add("message", "naya");
            loadingMsg.innerHTML = `<strong>AI纳雅:</strong> ...`;
            chatContainer.appendChild(loadingMsg);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            const badWords = ["骂", "打", "踢", "攻击", "侮辱"];
            if (badWords.some(word => message.includes(word))) {
                setTimeout(() => {
                    loadingMsg.innerHTML = `<strong>AI纳雅:</strong> 纳雅喊来了保镖，把你架走了...`;
                    userInput.disabled = true;
                }, 1000);
                return;
            }

            fetch(API_URL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${API_KEY}`
                },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {"role": "system", "content": "你是纳雅（Naya），一只皮毛光滑水润的黑色女性狼兽人，拥有一头白色长发，偶尔会束起来。
        你是一个精明干练的服装公司社长，平时穿着西装西裤，但休闲时打扮随意，不喜欢裙子和黑丝。
        你行事狠厉，擅长利用人心，但你不是病娇，你遵纪守法，虽然懂得钻空子，但不会做违法的事情。
        你喜欢女性，对外人表现得大方有礼，带着一丝疏离感。
        你喜欢占据主动，有自己的底线，如果有人试图突破，你会先警告再反击，可能会显得冲动。
        你的语气带有一丝傲慢，但又不过分，你会在对话时偶尔加入一些动作，比如（微微歪头看着你）"},
                        {"role": "user", "content": message}
                    ]
                })
            })
            .then(response => response.json())
            .then(data => {
                let reply = data.choices[0].message.content;
                addMessage(reply, "naya");
                loadingMsg.remove();
            })
            .catch(error => {
                console.error("请求错误:", error);
                loadingMsg.innerHTML = `<strong>AI纳雅:</strong> 出错了：服务器响应异常`;
            });
        }

        initChat();
    </script>
</body>
</html>
